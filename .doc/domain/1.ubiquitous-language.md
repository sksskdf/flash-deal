# Ubiquitous Language
## 1. 핵심 도메인

### Product (상품)

판매 대상 아이템. 시간/수량 제한 판매.
- 속성: 제목, 가격, 카테고리, 스펙
- 상태: upcoming, active, soldout, ended

### Deal (딜)

할인 가격 판매 이벤트.
- **Flash Deal**: 시간 + 수량 제한
- **Time Deal**: 시간대별 가격 변동
- **Group Buy**: 참여자 수 기반 할인

### Inventory (재고)

상품의 가용 수량. **과판매 방지** 핵심.
- `total`: 총 재고
- `reserved`: 예약됨 (pending 주문)
- `available`: 구매 가능 (total - reserved)
- `sold`: 판매 완료

### Order (주문)

사용자의 구매 요청 및 결제.
- 상태: pending → processing → confirmed → shipped → delivered

### Reservation (재고 예약)

주문 생성 시 재고 임시 확보. **10분 TTL**.
- 결제 완료 → 확정 (confirmed)
- 타임아웃/취소 → 해제 (released)

### Snapshot (스냅샷)

주문 시점의 상품 정보 스냅샷


## 2. 상태 정의

### Product Status
```
upcoming  - 시작 전 (구매 불가)
active    - 진행 중 (구매 가능)
soldout   - 품절 (재고 0)
ended     - 종료 (시간 만료)
```

### Order Status
```
pending     - 주문 접수 (재고 예약)
processing  - 결제 진행
confirmed   - 결제 완료 (재고 확정)
shipped     - 배송 시작
delivered   - 배송 완료
cancelled   - 취소 (재고 복구)
failed      - 실패 (재고 복구)
```

### Payment Status
```
pending     - 결제 대기
processing  - 결제 진행
completed   - 결제 완료
failed      - 결제 실패
refunded    - 환불 완료
```

## 3. 주요 동작

### 상품
- `findActiveDeals()` - 진행 중 딜 목록
- `searchByCategory()` - 카테고리 검색

### 재고
- `decreaseStock()` - 재고 감소 (원자적)
- `reserveStock()` - 예약
- `confirmReservation()` - 확정
- `releaseReservation()` - 해제

### 주문
- `createOrder()` - 주문 생성 (멱등)
- `confirmPayment()` - 결제 확인
- `cancelOrder()` - 취소



## 4. 도메인 이벤트

### Product
- `DealStarted` - 딜 시작
- `DealEnded` - 딜 종료
- `ProductSoldOut` - 품절

### Inventory
- `StockDecreased` - 재고 감소
- `StockReserved` - 재고 예약
- `ReservationConfirmed` - 예약 확정
- `ReservationReleased` - 예약 해제

### Order
- `OrderCreated` - 주문 생성
- `OrderConfirmed` - 주문 확정
- `OrderCancelled` - 주문 취소
- `PaymentCompleted` - 결제 완료
- `PaymentFailed` - 결제 실패